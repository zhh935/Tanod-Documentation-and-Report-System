<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="tailwind.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="icon" href="../images/Barangay-Market-Area-Seal.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <title>Tanod Dashboard</title>
</head>
<body class="bg-[#E1EACD] overflow-x-hidden relative dashboard-bg-blur">

  <!--Header-->
<!-- MOBILE HEADER from template_v1 (visible on small screens) -->
<header id="topHeaderMobile" class="sticky top-0 flex items-center justify-between w-full h-[100px] px-5 bg-[#4B5320] text-white z-50 md:hidden">
  <div class="text-3xl">
      <button id="menuToggle" class="cursor-pointer text-white">
          <i class="fa-solid fa-bars"></i>
      </button>
  </div>
  <div class="transform flex items-center gap-2">
    <img src="../images/Barangay-Market-Area-Seal.png" class="w-[60px] h-[60px]" />
    <span class="text-white font-bold text-[clamp(16px,2vw,20px)] hidden sm:inline-block">
        TANOD DOCUMENTATION <br />
        AND REPORTING SYSTEM
    </span>
  </div>
  <div class="flex items-center gap-6">
  <!-- Notification Icon -->
  <a href="notifications.html"
     class="flex-shrink-0 hover:drop-shadow-[0_0_5px_#FFFFFF] transition-all duration-300 text-2xl">
    <i class="fas fa-bell icon-responsive text-white"></i>
  </a>

  <!-- Profile Photo -->
  <a href="profile.html"
     class="flex-shrink-0 hover:drop-shadow-[0_0_5px_#FFFFFF] transition-all duration-300">
    <img src="../images/maloi.jpg" alt="Profile"
         class="w-[50px] h-[50px] rounded-full border-2 border-white" />
  </a>
  </div>   
</header>

<!-- DESKTOP HEADER from template_v2 (visible on md and up) -->
<header id="topHeaderDesktop" class="sticky top-0 hidden md:flex items-center justify-between w-full h-[100px] px-5 bg-[#4B5320] text-white z-[50]">
  <div class="flex items-center gap-2">
    <img src="../images/Barangay-Market-Area-Seal.png" alt="Logo" class="w-[60px] h-[60px]" />
    <span class="text-white font-bold text-[clamp(12px,_2vw,_16px)] hidden sm:inline-block">
        TANOD DOCUMENTATION <br />
        AND REPORTING SYSTEM
    </span>
  </div>
    <div class="flex items-center gap-6 ml-auto">
  <nav id="header-nav-text" class="flex text-[clamp(10px,_1.5vw,_14px)] font-bold h-full divide-x divide-[#4B5320]">
    <a href="dashboard.html" class="flex-1 flex items-center justify-center px-4 py-3 border-b-[5px] border-transparent hover:bg-[#8A9A5B] hover:border-b-[#FFD700] transition-all duration-300 text-center">
      Dashboard
    </a>
    <a href="incident-report.html" class="flex-1 flex items-center justify-center px-4 py-3 border-b-[5px] border-transparent hover:bg-[#8A9A5B] hover:border-b-[#FFD700] transition-all duration-300 text-center">
      Incident Report
    </a>
    <div class="flex-1 flex items-center justify-center px-4 py-3 bg-[#6F7F48] text-[#C8D75A] border-b-[5px] border-b-[#C8D75A] text-center">
      Leave Application
    </div>
  </nav>
  <div class="flex items-center gap-6">
  <!-- Notification Icon -->
  <a href="notifications.html"
     class="flex-shrink-0 hover:drop-shadow-[0_0_5px_#FFFFFF] transition-all duration-300 text-2xl">
    <i class="fas fa-bell icon-responsive text-white"></i>
  </a>

  <!-- Profile Photo -->
  <a href="profile.html"
     class="flex-shrink-0 hover:drop-shadow-[0_0_5px_#FFFFFF] transition-all duration-300">
    <img src="../images/maloi.jpg" alt="Profile"
         class="w-[50px] h-[50px] rounded-full border-2 border-white" />
  </a>
  </div>
</header>

  

<div class="relative dashboard-bg-blur"></div>
  <!-- SIDEBAR -->
  <div id="sidebar" data-open="false" class=" pt-3 fixed top-0 left-0 z-[1000] w-[250px] bg-[#4B5320] text-white shadow-md flex flex-col min-h-screen transition-transform duration-300">

    <!-- Close Button (Mobile Only) -->
    <div class="w-full flex justify-start">
      <button id="closeSidebar" class="hidden text-2xl text-white px-4 pt-4">
        <i class="fas fa-times"></i>
      </button>
    </div>

      <!-- Logo + Title -->
    <div class="flex flex-col items-center text-center space-y-3 mt-4 pt-4 px-4">
      <img src="../images/Barangay-Market-Area-Seal.png" alt="Logo" class="w-[120px] h-[120px] rounded-full bg-white" loading="lazy"/>
      <div class="font-bold text-sm leading-[1.3]">
        TANOD DOCUMENTATION AND REPORTING SYSTEM
      </div>
    </div>

    <!-- User Profile -->
    <a href="profile.html" class="flex items-center w-full py-3 mt-4 transition-colors duration-300 border-l-[5px] border-transparent hover:bg-[#8A9A5B] hover:border-[#FFD700] no-underline">
      <img src="../images/maloi.jpg" alt="Profile"
          class="w-[50px] h-[50px] rounded-full bg-[#ddd] border-2 border-white mr-4 ml-3" />
      <div class="flex flex-col justify-center">
        <div class="font-bold text-base leading-tight text-white">Maloi Ricalde</div>
        <div class="text-[13px] text-[#ccc] leading-tight">Tanod</div>
      </div>
    </a>

    <!-- Menu -->
    <nav class="w-full mt-2">
      <div class="px-5 py-2 text-[12px] uppercase text-[#f0f0f0] mb-2">Main Menu</div>
      <ul class="list-none m-0 p-0">
        <li class="mb-1">
          <a href="dashboard.html"
            class="flex items-center py-3 border-l-[5px] border-transparent hover:bg-[#8A9A5B] hover:border-[#FFD700] transition-colors duration-300">
            <i class="fas fa-th-large mr-2 ml-3 text-lg"></i> <p class="">Dashboard</p>
          </a>
        </li>
        <li class="mb-1">
          <a href="incident-report.html"
            class="flex items-center py-3 border-l-[5px] border-transparent hover:bg-[#8A9A5B] hover:border-[#FFD700] transition-colors duration-300">
            <i class="fas fa-exclamation-triangle mr-2 ml-3 text-lg"></i> <p class="">Leave Application</p>
          </a>
        </li>
        <li class="mb-1">
          <div class="flex items-center py-3 border-l-[5px] border-[#C8D75A] text-[#C8D75A] font-bold bg-[#6F7F48]">
            <i class="fas fa-sign-out-alt mr-2 ml-3 text-lg"></i>
            <span class="">Leave Application</span>
          </div>
        </li>
        <li class="mb-1">
          <a href="notifications.html"
              class="flex items-center py-3 border-l-[5px] border-transparent hover:bg-[#8A9A5B] hover:border-[#FFD700] transition-colors duration-300">
              <i class="fas fa-bell mr-2 ml-3 text-lg"></i> <p class="">Notifications</p>
          </a>
        </li>
      </ul>
    </nav>


    <!-- Logout Button -->
    <div class="w-full px-5 py-2">
      <button class="w-full py-3 bg-white text-[#7A0A0A] font-bold text-[16px] rounded transition-colors duration-300 hover:bg-[#eee]">
        Log Out
      </button>
    </div>
  </div>

  <div id="overlay" class="fixed inset-0 bg-black/40 hidden z-40"></div>





  <!--Main Container-->
  <div class="w-[90%] min-h-[40svh] bg-white shadow-lg rounded-[30px] mx-auto mt-5 mb-12 flex flex-col pt-8 relative z-10">
    <form id ="leaveform" class="w-full flex-grow flex flex-col gap-5 max-h-full px-12 items-center">
      <div class="flex justify-center items-center gap-2 mt-[30px]">
        <div class="w-auto align-middle">
        <i class="fas fa-sign-out-alt text-[#4B5320] text-2xl mr-2"></i>
        </div>
        <h2 class="text-center text-[clamp(1.2em,4vw,2em)] font-bold text-[#4B5320]">LEAVE APPLICATION</h2>
      </div>

      <p class="text-xs italic text-center text-gray-500 mt-[-10px] mb-6">(*) Required fields must be filled to apply for leave.</p>

      <!-- Leave Type -->
      <div class="w-full flex flex-col items-start">
        <label for="leave-type" class="font-bold text-sm text-gray-700 mb-1">Leave Type<span class="text-xs italic text-gray-500"> (*)</span></label>
        <select id="leave-type" name="leave-type"
          class="w-full p-2 bg-gray-100 border border-gray-400 rounded select-none text-sm focus:outline-none focus:ring-2 focus:ring-lime-600 appearance-none bg-[url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13%205.1L146.2%20204.4%2018.8%2074.5a17.6%2017.6%200%200%200-25.3%2023.7l138.6%20138.6c6.7%206.7%2017.7%206.7%2024.4%200l138.6-138.6a17.6%2017.6%200%200%200-11.7-29.4z%22%2F%3E%3C%2Fsvg%3E')] bg-no-repeat bg-[right_0.75rem_center] bg-[length:12px] pr-10">
          <option value="">-- Select --</option>
          <option value="sick">Sick Leave</option>
          <option value="vacation">Vacation Leave</option>
          <option value="emergency">Emergency Leave</option>
          <option value="maternity">Maternity Leave</option>
          <option value="paternity">Paternity Leave</option>
        </select>
      </div>

      <!-- Date Range -->
      <div class="flex flex-col md:flex-row justify-between gap-5 w-full">
        <div class="w-full flex flex-col items-start">
          <label for="start-date" class="font-bold text-sm text-gray-700 mb-1">Start Date<span class="text-xs italic text-gray-500"> (*)</span></label>
          <input type="date" id="start-date" name="start-date"
            class="w-full p-2 bg-gray-100 border border-gray-400 rounded text-sm focus:outline-none focus:ring-2 focus:ring-lime-600" />
        </div>

        <div class="w-full flex flex-col items-start">
          <label for="end-date" class="font-bold text-sm text-gray-700 mb-1">End Date<span class="text-xs italic text-gray-500"> (*)</span></label>
          <input type="date" id="end-date" name="end-date"
            class="w-full p-2 bg-gray-100 border border-gray-400 rounded text-sm focus:outline-none focus:ring-2 focus:ring-lime-600" />
        </div>
      </div>

      <!-- Reason -->
      <div class="w-full flex flex-col items-start">
        <label for="reason-for-leave" class="font-bold text-sm text-gray-700 mb-1">Reason for leave<span class="text-xs italic text-gray-500"> (*)</span></label>
        <textarea id="reason-for-leave" name="reason-for-leave" rows="5"
          class="w-full p-2 bg-gray-100 border border-gray-400 rounded text-sm focus:outline-none focus:ring-2 focus:ring-lime-600 min-h-[100px] resize-y"
          placeholder="Enter your reason here..."></textarea>
      </div>

      <!-- File Upload -->
      <div class="w-full flex flex-col items-start mt-2">
        <label for="attached-document-leave" class="font-bold text-sm text-gray-700 mb-1">Attached Document (pdf, jpg or docs)</label>
        <div class="flex flex-col sm:flex-row items-stretch sm:items-center w-full gap-2">
          <input type="file" id="attached-document-leave" name="attached-document-leave" class="hidden" multiple />
          <label for="attached-document-leave" class="choose-file-label">
              Choose File
              <input type="file" id="attached-document-leave" name="attached-document-leave" class="hidden" multiple />
            </label>
          <input type="text" class="flex-1 min-w-0 p-2 border border-gray-200 rounded bg-gray-50 text-sm text-gray-500" placeholder="No file chosen" readonly />
        </div>
      </div>

    <!-- Buttons -->
    <div class="flex justify-center gap-5 w-full py-5 px-12">
      <button type="submit" class="submit-button bg-[#707070] opacity-100 cursor-not-allowed text-[#F5F5F5] px-6 py-3 font-bold rounded-full text-base border-2" disabled>
        Submit
      </button>
      <button type="reset"
        class="bg-[#707070] text-[#F5F5F5] px-6 py-3 font-bold rounded-full text-base border-2 hover:bg-[#e0e0e0] transition ease-in-out duration-200 transform hover:-translate-y-0.5">
        Clear
      </button>
    </div>
  </div>

  <!-- Modal -->
  <div id="successModal" class="fixed inset-0 z-[1000] bg-black/40 flex justify-center items-center opacity-0 pointer-events-none transition-opacity duration-300">
    <div class="bg-[#fefefe] p-6 sm:p-8 rounded-[15px] shadow-xl w-[90%] max-w-[400px] text-center relative transform -translate-y-5 transition-transform duration-300 modal-content">
      <span class="close-button absolute top-2 right-4 text-[28px] font-bold text-[#aaa] cursor-pointer">&times;</span>
      <div class="modal-body">
        <div class="text-[80px] text-[#57a045]">
          <i class="fa-solid fa-check"></i>
        </div>
        <h3 class="text-[1.5em] text-[#333] mt-0 font-semibold">Upload Successful!</h3>
        <p class="text-[1em] text-[#555] mb-5">Your report will be reviewed by the Admin.</p>
        <button class="modal-close-button bg-[#D62A29] text-white px-6 py-2 rounded-full text-base font-bold transition duration-300 hover:bg-[#c02221]">
          Close
        </button>
      </div>
    </div>
  </div>

  <!-- Clear Confirmation Modal -->
<div id="clearConfirmModal" class="fixed inset-0 z-[1000] bg-black/40 flex justify-center items-center opacity-0 pointer-events-none transition-opacity duration-300">
  <div class="bg-[#fefefe] p-6 sm:p-8 rounded-[15px] shadow-xl w-[90%] max-w-[400px] text-center relative">
    <span id="closeClearModal" class="absolute top-2 right-4 text-[28px] font-bold text-[#aaa] cursor-pointer">&times;</span>
    <div class="modal-body">
      <div class="text-[40px] text-[#D62A29] mb-2">
        <i class="fa-solid fa-triangle-exclamation"></i>
      </div>
      <h3 class="text-[1.2em] text-[#333] mt-0 font-semibold mb-2">Clear Report?</h3>
      <p class="text-[1em] text-[#555] mb-5">
        You are about to clear all details that you've written thus far in this report. Do you wish to start this report over again?
      </p>
      <div class="flex justify-center gap-4">
        <button id="confirmClearBtn" class="bg-[#D62A29] text-white px-6 py-2 rounded-full text-base font-bold transition duration-300 hover:bg-[#c02221]">
          Yes, Clear
        </button>
        <button type="button" id="cancelClearBtn" class="bg-[#f0f0f0] text-[#555] px-6 py-2 rounded-full text-base font-bold border transition duration-300 hover:bg-[#e0e0e0]">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>
</form>
  <script>
    const menuToggle = document.getElementById("menuToggle");
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById("overlay");
    const closeBtn = document.getElementById("closeSidebar");

    function openSidebar() {
      sidebar.dataset.open = "true";
      overlay.classList.remove("hidden");
    }

    function closeSidebar() {
      sidebar.dataset.open = "false";
      overlay.classList.add("hidden");
    }

    menuToggle?.addEventListener("click", openSidebar);
    overlay?.addEventListener("click", closeSidebar);
    closeBtn?.addEventListener("click", closeSidebar);
    
    window.addEventListener("resize", () => {
        if (window.innerWidth >= 768) {
          closeSidebar();
        }
    });

    function confirmLogout() {
    if (confirm("Are you sure you want to log out?")) {
    // Example action: redirect to logout page
        window.location.href = "../index.html"; // or whatever your logout URL is
      }
    }

    // Main Container

    // Modal logic
    const modal = document.getElementById("successModal");
    const submitButtons = document.querySelectorAll(".submit-button");
    const closeButton = document.querySelector(".close-button");
    const modalCloseBtn = document.querySelector(".modal-close-button");

    function showModal(event) {
      event.preventDefault();
      modal.classList.add("show");
      modal.classList.remove("pointer-events-none", "opacity-0");
      modal.classList.add("pointer-events-auto", "opacity-100");
    }

    submitButtons.forEach(button => button.addEventListener("click", showModal));

    closeButton.addEventListener("click", () => {
      modal.classList.remove("show", "opacity-100", "pointer-events-auto");
      modal.classList.add("opacity-0", "pointer-events-none");
    });

    modalCloseBtn.addEventListener("click", () => {
      modal.classList.remove("show", "opacity-100", "pointer-events-auto");
      modal.classList.add("opacity-0", "pointer-events-none");
    });

    window.addEventListener("click", event => {
      if (event.target === modal) {
        modal.classList.remove("show", "opacity-100", "pointer-events-auto");
        modal.classList.add("opacity-0", "pointer-events-none");
      }
    });
        // Confirmation modal logic for Clear button
    const clearBtn = document.querySelector('button[type="reset"]');
    const clearModal = document.getElementById("clearConfirmModal");
    const closeClearModal = document.getElementById("closeClearModal");
    const cancelClearBtn = document.getElementById("cancelClearBtn");
    const confirmClearBtn = document.getElementById("confirmClearBtn");
    const formEl = document.querySelector("leaveform");

    clearBtn.addEventListener("click", function(e) {
      e.preventDefault();
      clearModal.classList.add("opacity-100", "pointer-events-auto");
      clearModal.classList.remove("opacity-0", "pointer-events-none");
    });

    function hideClearModal() {
      clearModal.classList.remove("opacity-100", "pointer-events-auto");
      clearModal.classList.add("opacity-0", "pointer-events-none");
    }

    closeClearModal.addEventListener("click", hideClearModal);
    cancelClearBtn.addEventListener("click", hideClearModal);

    confirmClearBtn.addEventListener("click", function() {
      if (formEl) {
        formEl.reset();
        // If you have dynamic fields, clear them here as well
        // Example: document.getElementById("otherPersonsContainer")?.innerHTML = "";
      }
      hideClearModal();
    });
      document.addEventListener("DOMContentLoaded", function() {
        const fileInput = document.getElementById("attached-document-leave");
        const fileNameInput = fileInput
          .closest("div.flex")
          .querySelector('input[type="text"][readonly]');

        fileInput.addEventListener("change", function () {
          if (fileInput.files && fileInput.files.length > 0) {
            // Join all file names with comma
            const names = Array.from(fileInput.files).map(f => f.name).join(", ");
            fileNameInput.value = names;
          } else {
            fileNameInput.value = "No file chosen";
          }
        });
      });
      function isLeaveFormValid() {
      const leaveType = document.getElementById('leave-type').value.trim();
      const startDate = document.getElementById('start-date').value.trim();
      const endDate = document.getElementById('end-date').value.trim();
      const reason = document.getElementById('reason-for-leave').value.trim();
      const fileInput = document.getElementById('attached-document-leave');
      const hasFile = fileInput && fileInput.files && fileInput.files.length > 0;

      return (
        leaveType &&
        startDate &&
        endDate &&
        reason &&
        hasFile
      );
    }
    function updateLeaveSubmitButtonState() {
      const submitBtn = document.querySelector('.submit-button');
      if (!submitBtn) return;
      if (isLeaveFormValid()) {
        submitBtn.disabled = false;
        submitBtn.classList.remove('opacity-50', 'cursor-not-allowed', 'bg-gray-400');
        submitBtn.classList.add('bg-green-600', 'shadow-[0_0_10px_2px_#22c55e]', 'hover:bg-green-700', 'cursor-pointer');
      } else {
        submitBtn.disabled = true;
        submitBtn.classList.add('bg-gray-400', 'opacity-100', 'cursor-not-allowed');
        submitBtn.classList.remove('bg-green-600', 'shadow-[0_0_10px_2px_#22c55e]', 'hover:bg-green-700', 'cursor-pointer');
      }
    }
          // Attach listeners to all relevant fields
      document.addEventListener('DOMContentLoaded', function() {
        const fields = [
          'leave-type',
          'start-date',
          'end-date',
          'reason-for-leave'
        ];
        fields.forEach(id => {
          const el = document.getElementById(id);
          if (el) el.addEventListener('input', updateLeaveSubmitButtonState);
        });

        // Listen for file input changes
        const fileInput = document.getElementById('attached-document-leave');
        if (fileInput) {
          fileInput.addEventListener('change', updateLeaveSubmitButtonState);
        }

        // Initial state
        updateLeaveSubmitButtonState();
      });

      // Prevent form submission if not valid (safety)
      const leaveForm = document.getElementById('leaveform');
      if (leaveForm) {
        leaveForm.addEventListener('submit', function(e) {
          if (!isLeaveFormValid()) {
            e.preventDefault();
            updateLeaveSubmitButtonState();
            return false;
          }
        });
      }
      </script>


</body>


</html>